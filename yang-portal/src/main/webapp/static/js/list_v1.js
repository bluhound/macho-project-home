(function(e){var a=[];e.ui=e.ui||{version:"1.0 beta",defineProperty:Object.defineProperty,create:function(h,l,k){if(!k){k=l;l=e.ui.widget}var f=[],g=new l(),m=/\b_super\b/,i=g.__proto__,j=function(p,o){if(p){var q=this,n=e.slice(arguments);e.each(f,function(r,t){var v=t.split("."),t=a[v.shift()]||{},s,u={};e.each(v,function(w,x){s=x;t=t[s]});t&&(s?u[s]=t:u=t);d(q,u,"delegate")});q._createWidget.apply(q,n)}};e.ui[h]=function(o,n){return new j(o,n)};j.prototype=e.extend(g,{widgetName:h,widgetBaseClass:g.widgetName||l},e.each(k,function(n,o){if(e.isFunction(o)&&e.isFunction(i[n])&&m.test(o.toString())){k[n]=function(){this._super=i[n];var p=o.apply(this,arguments);delete this._super;return p}}}));return{attach:function(n){f=f.concat(e.isArray(n)?n:n.split(","))}}},define:function(h,g){try{if(!g){g=h;h="_privateModule"}var i=e.ui[h]||(e.ui[h]={}),f=c(g);a[h]=e.extend(i,f)}catch(j){throw new Error(j)}}};function d(g,f,h){switch(h){case"attach":e.extend(g,f);break;case"delegate":e.each(f,function(i,j){if(g[i]===undefined){g[i]=function(){var k=e.slice(arguments);k.unshift(this.widget());j.apply(this,k)}}});break}}function b(k){var g=e.ui[k]||{},h=e.slice(arguments,1),j=0,f;while(f=g[h[j]]){g=f;j++}return h[j]?f:g}function c(g){var f=/require\(\s*['"]?([^'")]*)/g,i=[],k,h,j;if(e.isPlainObject(g)){return g}else{if(e.isFunction(g)){k=g.toString();while(h=f.exec(k)){if(j=h[1]){!e.ui[j]&&i.push("$.ui."+j)}}if(i.length){throw ("undefined modules: "+i.join(", "))}return g(b)}else{throw ("type error: factory should be function or object")}}return g}})(Zepto);(function(a,b){a.ui.define("ex",function(){var f={},i=Object.prototype.toString,j;a.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(l,k){f["[object "+k+"]"]=k.toLowerCase()});a.implement=function(m,n,l){var k=n?a:a.fn;a.each(m,function(o,q){var p=k[o];if(p==b||!p.$ex||l){q.$ex=true;k[o]=q}});return a};a.implement({_guid:0,emptyFn:function(){},type:function(k){return k==null?String(k):f[i.call(k)]||"object"},isNull:function(k){return k===null},isUndefined:function(k){return k===b},slice:function(l,k){return Array.prototype.slice.call(l,k||0)},bind:function(m,l,k){return function(){var n=(n||[]).concat(a.slice(arguments));m.apply(l,n)}},guid:function(){return this._guid++},later:function(m,k,p,l,o){var k=k||0,n=function(){m.apply(l,o)};return p?setInterval(n,k):setTimeout(n,k)},alert:function(){var k=false;return function(m,l){if(!k){window.alert(m);l&&(k=true)}}}(),parseTpl:function(n,m){var k="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+n.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/<%=([\s\S]+?)%>/g,function(o,p){return"',"+p.replace(/\\'/g,"'")+",'"}).replace(/<%([\s\S]+?)%>/g,function(o,p){return"');"+p.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');";var l=new Function("obj",k);return m?l(m):l},loadFile:function(m,l,p){var k=/\.css(?:\?|$)/i.test(m),n=document.head||document.getElementsByTagName("head")[0],o=document.createElement(k?"link":"script"),l=l||a.emptyFn,r,q;if(k){o.rel="stylesheet";o.href=m;n.appendChild(o)}else{q=function(){l();clearTimeout(r)};r=setTimeout(function(){q();throw new Error("failed to load js file:"+m)},p||50);o.addEventListener("load",q,false);o.async=true;o.src=m;n.insertBefore(o,n.firstChild)}}},true);var d=a.fn.on,c=a.fn.off,e=a.fn.trigger,h={touchstart:"mousedown",touchend:"mouseup",touchmove:"mousemove",tap:"click"},g=function(l){var k=[];(l||"").split(" ").forEach(function(m){k.push(!("ontouchstart" in window)?(h[m]?h[m]:m):m)});return k.join(" ")};a.implement({on:function(l,k,m){return d.call(this,g(l),k,m)},off:function(l,k,m){return c.call(this,g(l),k,m)},offset:function(l){if(this.length==0){return null}var k="getBoundingClientRect" in this[0]?this[0].getBoundingClientRect():(function(o){var q=o.offsetTop,p=o.offsetLeft,n=o.offsetWidth,m=o.offsetHeight;while(o.offsetParent){o=o.offsetParent;q+=o.offsetTop;p+=o.offsetLeft}q-=window.pageYOffset;p-=window.pageXOffset;return{top:q,left:p,right:p+n,bottom:q+m,width:n,height:m}})(this[0]);return{left:k.left+(l?0:window.pageXOffset),top:k.top+(l?0:window.pageYOffset),width:k.width,height:k.height,right:k.right+(l?0:window.pageXOffset),bottom:k.bottom+(l?0:window.pageYOffset)}},trigger:function(n){var l=a.slice(arguments);if(a.fn.trigger.caller){var m=a.fn.trigger.caller.arguments,k;if(a.type(n)=="string"){l[0]=a.Event(n)}if(m&&(k=m[0])&&/Event\]$/i.test(i.call(k))&&a.inArray(l[0].type,["tap","singleTap","doubleTap","swipe","swipeLeft","swipeRight","swipeUp","swipeDown "])>-1){l[0].originalEvent=k}}return e.apply(this,l)}},false,true);a(window).on("scroll",function(k){clearTimeout(j);j=setTimeout(function(){a(document).trigger("scrollStop")},50)})})})(Zepto);(function(g){var a="highlight-",d=null,f=null,c=null,e=false,b=function(l){var k=l.currentTarget,j=g(k).data(a+"className")||d&&d.data(a+"className"),h=function(m){var n;f&&clearTimeout(f);f=null;if(d){d.off("touchmove",b);c&&clearTimeout(c);n=d;m?(c=setTimeout(function(){c=null;n.removeClass(j)},80)):n.removeClass(j);d=null}},i=function(m){f=setTimeout(function(){var n=m.data(a+"className");m.addClass(n);f=null},80)};switch(l.type){case"touchstart":if(l.touches.length>1){return}case"mousedown":if(k!==document){h();d=g(k);l._target=k;i(d);d.on("touchmove",b)}else{if(!l._target){h()}}break;case"touchmove":case"mousemove":h();break;case"touchend":case"mouseup":case"touchcancel":h(true);break}};g.implement({highlight:function(h){h=h||"";if(!e){e=true;g(document).on("touchstart touchend touchcancel",b)}return this.each(function(){var i=g(this),j=i.data(a+"className")||"";d&&d[0]==this&&d.removeClass(j)&&h&&d.addClass(h);i.css("-webkit-tap-highlight-color","rgba(255,255,255,0)").data(a+"className",h);if(!j&&h){i.on("touchstart",b)}else{if(j&&!h){i.off("touchstart",b)}}})},behavior:function(){var h=g.slice(arguments);return this.highlight.apply(this,h)}},false,true);g(function(){var h=true,i=function(){if(!h){return}h=false;var j=g("[data-highlight]").not("[data-highlight-class-name]"),k=j.attr("data-highlight");k&&j.highlight(k);h=true};g(document).bind("DOMSubtreeModified",i)})})(Zepto);(function(a,b){a.ui.create("widget",function(){},{_createWidget:function(c,d){var e=this;if(a.isPlainObject(c)){d=c||{};c=b}a.extend(e,{_element:c&&a(c),_data:a.extend({status:true,plugins:{}},e._data,d)});e._create();e._init();e.widget().on("touchstart touchend tap",function(f){(f.bubblesList||(f.bubblesList=[])).push(e)})},_create:function(){},_init:function(){},destroy:function(){var c=this;a.each(c.data("plugins"),function(e,d){d.destroy()});c.trigger("destroy").off().widget().remove();c.__proto__=null;a.each(Object.keys?Object.keys(c):c,function(e,d){delete c[d]})},data:function(c,e){var d=this._data;if(a.isPlainObject(c)){return a.extend(d,c)}else{return e!==b?d[c]=e:d[c]}},widget:function(c){return this._element=c||this._element},component:function(h,c){var f=this,d=f.data("plugins");try{if(a.isFunction(c)){d[h]=c.apply(f)}else{if(c!==b){if(d[h]){d[h].destroy()}delete d[h]}}}catch(g){}return d[h]},on:function(f,h,d){var e=this,f=f.toLowerCase(),c=e._callbacks||(e._callbacks={}),g=c[f]||(c[f]=[]);g.push([h,d]);return e},off:function(g,j){var f=this,e;if(!g){f._callbacks={}}else{if(e=f._callbacks){g=g.toLowerCase();if(!j){e[g]=[]}else{var h=e[g];if(!h){return f}for(var d=0,c=h.length;d<c;d++){if(h[d]&&j===h[d][0]){h[d]=null;break}}}}}return f},trigger:function(h){var g=this,h=h.toLowerCase(),k=g.data("on"+h),f=a.slice(arguments,1),e,m,j;k&&k.apply(g,f);if(!h||!(m=g._callbacks)){return g}if(e=m[h]){for(var d=0,c=e.length;d<c;d++){j=e[d];j[0].apply(j[1]||g,f)}}return g}});a(document).ready(function(){a(document).trigger("pageInit")})})(Zepto);(function(a,b){a.ui.define("control",function(g){var i=a.os,e=parseFloat(i.version),f=!e,c=i.ios,h=i.android,j=/htc_sensation_z710e/i.test(navigator.userAgent),d={};d.fix=function(p,l){var k=a(p),p=k.get(0),o=a.extend({zIndex:999},l||{}),n=c&&o.top!=0?70:0,q,m;if((f||c&&e>=5)&&!p.isFixed&&!j){k.css("position","fixed").css(o);p.isFixed=true;return}k.css("position","absolute").css(o);if(!p.isFixed){p.isFixed=true;m=l.bottom!==b?"bottom":"top";q=parseFloat(k.css(m))||0;a(document).on("scrollStop",function(r){k.css(m,q+(m=="bottom"?-window.pageYOffset-n:window.pageYOffset+n)+"px")})}};d.setFloat=function(o){var m=a(o),s=m.clone().css({opacity:0,display:"none"}).attr("id",""),n=false,p={},q=m.css("position")||"static",k=function(){d.fix(m,{x:0,y:0});s.css("display","block");n=true},r=function(){m.css("position",q);s.css("display","none");n=false},l=function(u){var t=s.get(0).getBoundingClientRect().top||m.get(0).getBoundingClientRect().top,u=u||0+t;if(u<0&&!n){k()}else{if(u>0&&n){r()}}};m.after(s);a(document).on("touchstart",function(t){p.y=t.touches[0].pageY}).on("touchmove",function(t){var u=t.touches[0].pageY-p.y;p.y=t.touches[0].pageY;l(u)});a(window).on("scroll",function(){l()})};return d})})(Zepto);(function(a,b){a.ui.create("refresh",{_data:{container:"",instanceId:"",pullUpText:"加载更多",pullReleaseText:"松开立即加载",loadingText:"加载中...",clickText:"点击加载更多",type:"click",direction:"up",isShow:true,onReady:null},_create:function(){var c=this;c._createButtonUI();c.trigger("create")},_init:function(){var e=this,d=e.data("type"),c=e.widget();if(a.inArray(e.data("type"),["click","pullup"])==-1){return}e.data({range:150,_isOk:true,refreshing:false,list:c.parent().parent(),maxHeight:c.parent().parent().height()||200,maxTop:parseInt(c.parent().parent().get(0).getBoundingClientRect().top)});d=="click"?e._clickAction():e._pullUpAction();if(!e.data("isShow")){c.hide()}e.trigger("init")},_createButtonUI:function(){var e=this,d=e.widget(),g=[],f=e.data("direction"),c=a(e.data("container")||document.body)[0];if(a.inArray(e.data("direction"),["up","down"])==-1){f="up"}if(!d){d=e.widget(a("<div></div>")).appendTo(c)}g.push('<span class="ui-refresh-pullup-icon"></span>');g.push('<span class="ui-refresh-pullup-label">'+(e.data("type")=="pullup"?e.data("pullUpText"):e.data("clickText"))+"</span>");d.html(g.join(""));if(!d.parent().length){f=="up"?d.appendTo(c):d.prependTo(c)}else{if(c!==document.body){f=="up"?d.appendTo(c):d.prependTo(c)}}e.data({pullUpLabel:d.find(".ui-refresh-pullup-label"),pullUpIcon:d.find(".ui-refresh-pullup-icon"),dir:f});e.data("pullUpIcon").hide();d.addClass(e.data("instanceId")||"ui-refresh")},_clickAction:function(){var d=this,c=a.bind(d._eventHandler,d);d.widget().on("tap",c)},_pullUpAction:function(){var e=this,c=e.data("list"),d=a.bind(e._eventHandler,e);c.on("touchstart touchmove touchend",d);e.widget().on("tap",d)},_tapHandler:function(i){var g=this;if(!g.data("_isOk")){return}var d=g.widget(),c=g.data("pullUpLabel"),h=g.data("pullUpIcon"),f=g.data("type");d.addClass("ui-refresh-loading");h.show();c.html(g.data("loadingText"));g.data("onReady").call(this,function(){d.removeClass("ui-refresh-loading");h.hide();c.html(f=="click"?g.data("clickText"):g.data("pullUpText"))});g.data("_isOk",false)},_touchStartHandler:function(i){if(!i.targetTouches[0]){return}var g=this,f=g.data("list"),h=g.data("dir"),j=g.data("maxTop"),d=g.data("range"),c=i.targetTouches[0].pageY;if((h=="up"&&c>(f.height()+j-d))||(h=="down"&&c<(j+g.widget().height()+d))){g.data("startY",c)}},_touchMoveHandler:function(i){var k=this,d=i.targetTouches[0].pageY,f=k.data("startY"),l=k.data("dir"),j=d-f;if(!i.targetTouches[0]||!k.data("_isOk")||!f||(l=="up"&&j>0)||(l=="down"&&j<0)){return}var c=k.data("pullUpLabel"),h=k.data("range"),g=k.data("maxTop");if(Math.abs(j)<k.data("maxHeight")&&!k.data("refreshing")){c.html(k.data("pullReleaseText"));k.data("refreshing",true)}k.data("allMoveY",j)},_touchEndHandler:function(){var e=this,d=e.widget(),f=e.data("pullUpIcon"),c=e.data("pullUpLabel");if(e.data("refreshing")){d.addClass("ui-refresh-loading");f.show();c.html(e.data("loadingText"));e.data("onReady").call(this,function(){f.hide();d.removeClass("ui-refresh-loading");c.html(e.data("pullUpText"))});e.data({refreshing:false,_isOk:false})}e.data("startY",0)},setStatus:function(c){var d=this;d.data("_isOk",!!c?true:false)},hide:function(e){var f=this,d=f.widget(),c=e?true:false;f.setStatus(c);if(f.data("isShow")){f.data("isShow",false);d.hide()}},show:function(e){var f=this,d=f.widget(),c=e||e==b?true:false;f.setStatus(c);if(!f.data("isShow")){f.data("isShow",true);d.show()}},setLoadEndText:function(j,e){var f=this,h=f.data("pullUpLabel"),g=f.data("pullUpIcon"),i=f.data("type")=="click"?f.data("clickText"):f.data("pullUpText"),c=!j?i:j,d=e?true:false;h.html(c);g&&g.hide();f.setStatus(d)},_eventHandler:function(d){var c=this;switch(d.type){case"click":case"tap":c._tapHandler(d);break;case"touchstart":c._touchStartHandler(d);break;case"touchmove":c._touchMoveHandler(d);d.target.nodeType==3&&a.os.ios&&c._touchEndHandler(d);a.os.android&&setTimeout(function(){c._touchEndHandler()},1000);break;case"touchend":setTimeout(function(){c._touchEndHandler(d)});break}}})})(Zepto);(function(a,b){a.ui.create("gotop",{_data:{afterScroll:function(){},touchendHandler:function(){}},_create:function(){var d=this,c=d.widget(),e=a(d.data("container")||document.body);if(c==b){c=d.widget(a('<div class="ui-gotop"></div>'))}!c.hasClass("ui-gotop")&&c.addClass("ui-gotop");c.html("<span>&nbsp;</span>");if(d.data("container")||!c.parent().length){c.appendTo(e)}d.trigger("create").data("container",e)},_init:function(){var d=this,c=a.bind(d._eventHandler,d);a(document).on("touchmove mousewheel scrollStop",c);d.widget().on("click",c);d.on("destroy",function(){d.widget().off("click",c);a(document).off("touchmove mousewheel scrollStop",c)}).trigger("init")},_scrollTo:function(){var e=this,c=window.pageYOffset,f=e.data("node")?a(e.data("node")).offset().top:0,d;return e.hide().trigger("goTop",d=a.later(function(){if(f<c){c=c-100;var g=c-f<100?f:c;window.scrollTo(0,g)}else{clearInterval(d)}},16,true))},show:function(e){var d=this,c=d.widget();if(d.data("isShow")!==true){c.css({display:"block",visibility:"visible"});d.data("isShow",true)}c.css(e||{});return d},hide:function(){var c=this;if(c.data("isShow")){c.widget().css("display","none");c.data("isShow",false)}return c},_touchEndHandle:function(c){if(this.data("touchendHandler")&&this.data("touchendHandler").apply(this,[c])===false){return}window.pageYOffset>a(window).height()?this.show():this.hide()},_touchMoveHandle:function(c){this.hide()},_eventHandler:function(d){var c=this;switch(d.type){case"touchmove":c._touchMoveHandle(d);break;case"click":c._scrollTo().hide().data("afterScroll")&&c.data("afterScroll").apply(this);break;case"mousewheel":case"scrollStop":c._touchEndHandle(d);break}}}).attach("control.fix");a(document).on("pageInit",function(){})})(Zepto);